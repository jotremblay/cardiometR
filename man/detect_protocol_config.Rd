% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/methods-stages.R
\name{detect_protocol_config}
\alias{detect_protocol_config}
\title{Detect Protocol Configuration from CPET Data}
\usage{
detect_protocol_config(data)
}
\arguments{
\item{data}{A CpetData S7 object containing breath-by-breath measurements}
}
\value{
A ProtocolConfig S7 object with detected parameters
}
\description{
Automatically detect exercise protocol parameters (modality, stage duration,
intensity increment, starting intensity) from breath-by-breath CPET data.
}
\details{
The detection algorithm:
\enumerate{
\item Determines modality from available columns (speed for treadmill, power for cycling)
\item Rounds the intensity signal to detect plateaus (5W for cycling, 0.5 km/h for treadmill)
\item Uses run-length encoding on the exercise portion to find stage boundaries
\item Estimates stage duration from the median plateau length (rounded to nearest 30s)
\item Estimates increment from the median positive difference between consecutive levels
}
}
\examples{
\dontrun{
config <- detect_protocol_config(cpet_data)
config@modality
config@stage_duration_s
}

}
